#version 330 core
in vec3 fragPos;in vec2 fragUV;out vec4 fragColor;uniform vec3 lightPos;layout(std430,binding=0)buffer b1{vec3 l[][2];};vec3 v(){vec3 v=vec3(0);for(int f=0;f<11;f++){vec3 a=l[f][0],m=l[f][1];v+=m*(1./(1.+.09*length(a-fragPos)))*.3;}return v;}void main(){float f=clamp(fragUV.y,0.,1.);vec3 l=mix(vec3(.2),mix(vec3(.2,.5,.2),vec3(.4,.8,.4),f),smoothstep(0.,.2,f))*mix(.2,1.,smoothstep(0.,.3,dot(vec3(0,1,0),normalize(lightPos)))),m=v();l+=m;fragColor=vec4(l+vec3(0,.05,0)*smoothstep(.5,1.,f),1);}